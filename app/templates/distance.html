{% extends "base.html" %}
{% block content %}
<div class="page-header">
    <div>
        <h2 class="page-title">Distance and ETA Calculator</h2>
        <p>Calculate driving distance and travel time between two cities via Cloud Function.</p>
    </div>
    <span class="pill">Routing tools</span>
</div>

<div class="card" style="max-width: 700px; margin-bottom: 24px;">
    <h3>Calculate Distance and ETA</h3>
    <form method="POST" action="/distance">
        <div class="form-grid">
            <div class="form-group">
                <label for="origin">Origin City</label>
                <input type="text" name="origin" id="origin" placeholder="e.g., London" required>
            </div>
            <div class="form-group">
                <label for="destination">Destination City</label>
                <input type="text" name="destination" id="destination" placeholder="e.g., Paris" required>
            </div>
        </div>
        <div style="margin-top: 16px;">
            <button type="submit" class="btn btn-primary">Calculate Distance</button>
        </div>
    </form>
</div>

{% if error %}
<div class="alert alert-danger">
    <strong>Error:</strong> {{ error }}
</div>
{% endif %}

{% if result %}
<div class="card" style="margin-bottom: 16px;">
    <h3>Distance and ETA Result</h3>
    <table class="table">
        <tr>
            <td><strong>Origin</strong></td>
            <td>{{ result.origin }}</td>
        </tr>
        <tr>
            <td><strong>Destination</strong></td>
            <td>{{ result.destination }}</td>
        </tr>
        <tr>
            <td><strong>Distance</strong></td>
            <td><strong>{{ result.distance_km }} km</strong> ({{ result.distance_text }})</td>
        </tr>
        <tr>
            <td><strong>Estimated Travel Time</strong></td>
            <td><strong>{{ result.duration_text }}</strong> ({{ result.duration_minutes }} minutes)</td>
        </tr>
    </table>
</div>

<a href="https://www.google.com/maps/dir/{{ result.origin }}/{{ result.destination }}" target="_blank" class="btn btn-secondary">View Directions on Google Maps</a>
{% endif %}

{% endblock %}
