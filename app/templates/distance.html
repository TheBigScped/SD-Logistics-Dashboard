{% extends "base.html" %}
{% block content %}
<h2>Distance & ETA Calculator</h2>

<p>Calculate driving distance and estimated travel time between two cities using Google Maps API via Cloud Function.</p>

<!-- Distance Form -->
<div style="background: #f5f5f5; padding: 20px; margin-bottom: 30px; border-radius: 5px; max-width: 600px;">
    <h3>Calculate Distance & ETA</h3>
    <form method="POST" action="/distance">
        <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Origin City:</label>
            <input type="text" name="origin" placeholder="e.g., London" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 3px;">
        </div>
        <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Destination City:</label>
            <input type="text" name="destination" placeholder="e.g., Paris" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 3px;">
        </div>
        <button type="submit" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; cursor: pointer; border-radius: 3px; font-size: 16px;">Calculate Distance</button>
    </form>
</div>

<!-- Error Display -->
{% if error %}
<div style="background: #ffebee; border-left: 4px solid #f44336; padding: 15px; margin-bottom: 20px; border-radius: 3px;">
    <strong style="color: #c62828;">Error:</strong> {{ error }}
</div>
{% endif %}

<!-- Result Display -->
{% if result %}
<div style="background: #e3f2fd; border-left: 4px solid #2196F3; padding: 20px; margin-bottom: 20px; border-radius: 3px;">
    <h3 style="margin-top: 0; color: #1565c0;">üöó Distance & ETA Result</h3>
    <table style="width: 100%; border-collapse: collapse;">
        <tr style="border-bottom: 1px solid #bbdefb;">
            <td style="padding: 10px; font-weight: bold; width: 200px;">Origin:</td>
            <td style="padding: 10px;">{{ result.origin }}</td>
        </tr>
        <tr style="border-bottom: 1px solid #bbdefb;">
            <td style="padding: 10px; font-weight: bold;">Destination:</td>
            <td style="padding: 10px;">{{ result.destination }}</td>
        </tr>
        <tr style="border-bottom: 1px solid #bbdefb;">
            <td style="padding: 10px; font-weight: bold;">Distance:</td>
            <td style="padding: 10px; font-size: 1.2em; color: #1565c0;">
                <strong>{{ result.distance_km }} km</strong>
                <span style="color: #666; font-size: 0.9em;">({{ result.distance_text }})</span>
            </td>
        </tr>
        <tr>
            <td style="padding: 10px; font-weight: bold;">Estimated Travel Time:</td>
            <td style="padding: 10px; font-size: 1.2em; color: #1565c0;">
                <strong>{{ result.duration_text }}</strong>
                <span style="color: #666; font-size: 0.9em;">({{ result.duration_minutes }} minutes)</span>
            </td>
        </tr>
    </table>
</div>

<!-- Google Maps Directions Link -->
<div style="margin-top: 15px;">
    <a href="https://www.google.com/maps/dir/{{ result.origin }}/{{ result.destination }}" target="_blank" style="background: #2196F3; color: white; padding: 10px 20px; text-decoration: none; border-radius: 3px; display: inline-block;">
        üó∫Ô∏è View Directions on Google Maps
    </a>
</div>
{% endif %}

{% endblock %}