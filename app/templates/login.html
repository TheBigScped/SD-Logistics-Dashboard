{% extends "base.html" %}
{% block content %}
<h2>Login</h2>
<button onclick="login()">Login with Google</button>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>

<script>
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com"
};

firebase.initializeApp(firebaseConfig);

function login() {
  const provider = new firebase.auth.GoogleAuthProvider();
  firebase.auth().signInWithPopup(provider).then(result => {
    result.user.getIdToken().then(token => {
      fetch("/login", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({token: token})
      }).then(() => window.location = "/");
    });
  });
}
</script>
{% endblock %}
