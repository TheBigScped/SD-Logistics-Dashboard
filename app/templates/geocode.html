{% extends "base.html" %}
{% block content %}
<h2>City Geocoding</h2>

<p>Enter a city name to get its GPS coordinates using Google Maps API via Cloud Function.</p>

<!-- Geocode Form -->
<div style="background: #f5f5f5; padding: 20px; margin-bottom: 30px; border-radius: 5px; max-width: 500px;">
    <h3>Geocode a City</h3>
    <form method="POST" action="/geocode">
        <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: bold;">City Name:</label>
            <input type="text" name="city" placeholder="e.g., London, Paris, Tokyo" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 3px;">
        </div>
        <button type="submit" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; cursor: pointer; border-radius: 3px; font-size: 16px;">Get Coordinates</button>
    </form>
</div>

<!-- Error Display -->
{% if error %}
<div style="background: #ffebee; border-left: 4px solid #f44336; padding: 15px; margin-bottom: 20px; border-radius: 3px;">
    <strong style="color: #c62828;">Error:</strong> {{ error }}
</div>
{% endif %}

<!-- Result Display -->
{% if result %}
<div style="background: #e8f5e9; border-left: 4px solid #4CAF50; padding: 20px; margin-bottom: 20px; border-radius: 3px;">
    <h3 style="margin-top: 0; color: #2e7d32;">‚úì Geocoding Result</h3>
    <table style="width: 100%; border-collapse: collapse;">
        <tr style="border-bottom: 1px solid #c8e6c9;">
            <td style="padding: 10px; font-weight: bold; width: 200px;">City:</td>
            <td style="padding: 10px;">{{ result.city }}</td>
        </tr>
        <tr style="border-bottom: 1px solid #c8e6c9;">
            <td style="padding: 10px; font-weight: bold;">Formatted Address:</td>
            <td style="padding: 10px;">{{ result.formatted_address }}</td>
        </tr>
        <tr style="border-bottom: 1px solid #c8e6c9;">
            <td style="padding: 10px; font-weight: bold;">Latitude:</td>
            <td style="padding: 10px; font-family: monospace;">{{ result.lat }}</td>
        </tr>
        <tr>
            <td style="padding: 10px; font-weight: bold;">Longitude:</td>
            <td style="padding: 10px; font-family: monospace;">{{ result.lng }}</td>
        </tr>
    </table>
</div>

<!-- Google Maps Link -->
<div style="margin-top: 15px;">
    <a href="https://www.google.com/maps?q={{ result.lat }},{{ result.lng }}" target="_blank" style="background: #2196F3; color: white; padding: 10px 20px; text-decoration: none; border-radius: 3px; display: inline-block;">
        üìç View on Google Maps
    </a>
</div>
{% endif %}

{% endblock %}