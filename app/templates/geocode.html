{% extends "base.html" %}
{% block content %}
<div class="page-header">
    <div>
        <h2 class="page-title">City Geocoding</h2>
        <p>Enter a city name to get its GPS coordinates using Google Maps API via Cloud Function.</p>
    </div>
    <span class="pill">Location tools</span>
</div>

<div class="card" style="max-width: 640px; margin-bottom: 24px;">
    <h3>Geocode a City</h3>
    <form method="POST" action="/geocode">
        <div class="form-group">
            <label for="city">City Name</label>
            <input type="text" name="city" id="city" placeholder="e.g., London, Paris, Tokyo" required>
        </div>
        <div style="margin-top: 16px;">
            <button type="submit" class="btn btn-primary">Get Coordinates</button>
        </div>
    </form>
</div>

{% if error %}
<div class="alert alert-danger">
    <strong>Error:</strong> {{ error }}
</div>
{% endif %}

{% if result %}
<div class="card" style="margin-bottom: 16px;">
    <h3>Geocoding Result</h3>
    <table class="table">
        <tr>
            <td><strong>City</strong></td>
            <td>{{ result.city }}</td>
        </tr>
        <tr>
            <td><strong>Formatted Address</strong></td>
            <td>{{ result.formatted_address }}</td>
        </tr>
        <tr>
            <td><strong>Latitude</strong></td>
            <td><code>{{ result.lat }}</code></td>
        </tr>
        <tr>
            <td><strong>Longitude</strong></td>
            <td><code>{{ result.lng }}</code></td>
        </tr>
    </table>
</div>

<a href="https://www.google.com/maps?q={{ result.lat }},{{ result.lng }}" target="_blank" class="btn btn-secondary">View on Google Maps</a>
{% endif %}

{% endblock %}
