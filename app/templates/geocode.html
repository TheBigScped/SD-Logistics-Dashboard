{% extends "base.html" %}
{% block content %}
<h2>Geocode City</h2>
<p>Enter a city name to get its coordinates using Google Maps Geocoding API via Cloud Function.</p>

<form method="POST" style="margin-bottom: 30px;">
    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-weight: bold;">City Name:</label>
        <input type="text" name="city" placeholder="e.g., London, Paris, Tokyo" required 
               style="width: 300px; padding: 10px; border: 1px solid #ddd; border-radius: 3px;">
    </div>
    <button type="submit" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; cursor: pointer; border-radius: 3px;">
        Get Coordinates
    </button>
</form>

{% if error %}
<div style="background: #ffebee; border-left: 4px solid #f44336; padding: 15px; margin-bottom: 20px; border-radius: 3px; color: #c62828;">
    <strong>Error:</strong> {{ error }}
</div>
{% endif %}

{% if result %}
<div style="background: #e8f5e9; border-left: 4px solid #4CAF50; padding: 20px; border-radius: 3px;">
    <h3 style="margin-top: 0;">Geocoding Result:</h3>
    
    {% if result.success %}
        <p><strong>City:</strong> {{ result.city }}</p>
        <p><strong>Formatted Address:</strong> {{ result.formatted_address }}</p>
        <p><strong>Latitude:</strong> {{ result.latitude }}</p>
        <p><strong>Longitude:</strong> {{ result.longitude }}</p>
        {% if result.place_id %}
        <p><strong>Place ID:</strong> {{ result.place_id }}</p>
        {% endif %}
        {% if result.cached %}
        <p style="color: #1976D2;"><em>âœ“ Result from cache (faster response)</em></p>
        {% endif %}
        
        <a href="https://www.google.com/maps?q={{ result.latitude }},{{ result.longitude }}" 
           target="_blank" 
           style="display: inline-block; margin-top: 10px; background: #2196F3; color: white; padding: 10px 15px; text-decoration: none; border-radius: 3px;">
            View on Google Maps
        </a>
    {% else %}
        <p style="color: #c62828;"><strong>Error:</strong> {{ result.error }}</p>
    {% endif %}
</div>
{% endif %}

{% endblock %}